import{j as t,u as S,a as k,b as z,r as i}from"./index-30936eb3.js";import{Q as l}from"./react-toastify.esm-8e66b885.js";import{u as L}from"./apiGet-07db7467.js";import{L as M}from"./Loader-61c9142e.js";import{P as H}from"./index-6f2c059f.js";import{G as N,E}from"./ErrorMessage-8cabbd75.js";import{M as T}from"./MoviesList-a0e00271.js";function P(r){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zm.001 6c-.001 0-.001 0 0 0h-.465l-2.667-4H20l.001 4zM9.536 9 6.869 5h2.596l2.667 4H9.536zm5 0-2.667-4h2.596l2.667 4h-2.596zM4 5h.465l2.667 4H4V5zm0 14v-8h16l.002 8H4z"}},{tag:"path",attr:{d:"m10 18 5.5-3-5.5-3z"}}]})(r)}const f=({onSubmit:r})=>t.jsx("div",{className:`flex items-center justify-center px-6 py-3 text-white 
              bg-sky-600 z-50 shadow-md `,children:t.jsxs("form",{onSubmit:r,className:`flex items-center w-full max-w-xl 
                  overflow-hidden bg-white rounded`,children:[t.jsx("button",{type:"submit",className:`inline-block w-12 h-12 bg-inherit text-sky-500 
                  opacity-60 transition-opacity duration-300 hover:opacity-100`,children:t.jsx(P,{className:"block h-full w-full"})}),t.jsx("input",{name:"query",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",className:`inline-block w-full px-1 outline-none 
                    font-sans font-normal text-xl text-black 
                    placeholder:text-lg`})]})});f.propTypes={onSubmit:H.func.isRequired};const $=()=>{const r="search/movie",c=S(),u=k(),[x,y]=z(""),[o,g]=i.useState({query:x.get("query"),page:1}),{data:e,isLoaded:d,error:n}=L(r,o),m=c.pathname??"/",p=i.useCallback(()=>u(m),[m,u]),v=a=>{a.preventDefault();const h=a.currentTarget.elements.query,s=a.currentTarget.elements.query.value.trim();if(s){if(o.query===s){l.error(`Вже шукали "${s}" `),h.value="";return}}else{l.error("Введи ");return}y({query:s}),g(q=>({...q,query:s})),h.value=""};i.useEffect(()=>{(e==null?void 0:e.total_results)<=0&&o.query&&E("нема нікого !",p)},[e,p]),n&&l.error(n);const b=(e==null?void 0:e.total_results)>0&&!n,j=d&&!n,w=e==null?void 0:e.results;return t.jsxs(t.Fragment,{children:[t.jsx(f,{onSubmit:v}),j&&t.jsx(M,{}),b&&t.jsx(T,{title:`За пошуком "${o.query}"`,films:w,location:c})]})};export{$ as default};
